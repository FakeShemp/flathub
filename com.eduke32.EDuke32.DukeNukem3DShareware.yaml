id: com.eduke32.EDuke32.DukeNukem3DShareware
runtime: com.eduke32.EDuke32
sdk: org.freedesktop.Sdk//19.08
build-extension: true
separate-locales: false
appstream-compose: false
finish-args:
  - --require-version=1.0.9
modules: 
  - name: DukeNukem3DShareware
    buildsystem: simple
    build-commands: 
      - install -D apply_extra "${FLATPAK_DEST}/bin/apply_extra"
    post-install:
      - install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo ${FLATPAK_ID}.metainfo.xml
      - appstream-compose --basename=${FLATPAK_ID} --prefix=${FLATPAK_DEST} --origin=flatpak ${FLATPAK_ID}
    sources: 
      - type: extra-data
        filename: 3dduke13.zip
#        url: ftp://ftp.3drealms.com/share/3dduke13.zip
        url: https://archive.org/download/3dduke13/3dduke13.zip
        sha256: c67efd179022bc6d9bde54f404c707cbcbdc15423c20be72e277bc2bdddf3d0e
        size: 5924374
      - type: script
        dest-filename: apply_extra
        commands:
          - unzip 3dduke13.zip DN3DSW13.SHR 
          - unzip DN3DSW13.SHR
          - rm 3dduke13.zip DN3DSW13.SHR
      - type: file
        path: com.eduke32.EDuke32.DukeNukem3DShareware.metainfo.xml
